# ユーザープロフィール仕様

## 概要
ユーザーの基本情報および属性情報を管理するプロフィールの仕様。
正確なデータ収集と不正防止のため、一部項目には制約が設けられている。

## データ項目と制約

### 基本情報
| 項目名 | 必須 | 編集可否 | 備考 |
| --- | --- | --- | --- |
| お名前 | 必須 | 可 | |
| 性別 | 必須 | 可 | |
| 生年月日 | **必須** | **不可 (Immutable)** | 登録時に確定後、変更不可。修正が必要な場合は運営への問い合わせが必要。 |
| 居住地 | 必須 | 可 | 都道府県、市区町村、地域、詳細エリア |
| 興味関心 | 必須 | 可 | タグ選択式 |

### 学生情報 (学生ユーザーのみ)
| 項目名 | 必須 | 編集可否 | 備考 |
| --- | --- | --- | --- |
| 学生区分 | 必須 | 可 | 大学生/高校生/専門学生 |
| 学校名 | 必須 | 可 | |
| 学部 | 必須 | 可 | 大学生のみ |
| 学年 | 必須 | 可 | |
| 最寄り駅 | 任意 | 可 | |

## Immutable Birthday (生年月日ロック)
### 目的
- 年齢詐称の防止
- 誕生日ボーナスの不正受給防止
- ユーザー属性データの信頼性担保

### 実装仕様
1. **登録時**: 必須入力。入力確認を経て確定。
2. **編集時**: 既に値が存在する場合、UI上でロック（グレーアウト・変更不可アイコン表示）。
3. **Backend検証**: `updateProfile` APIにおいて、既存の生年月日と異なる値が送信された場合、エラーを返し更新を拒否する。

## プロフィール完了状態
- 全ての必須項目が入力された状態を「完了（Completed）」とする。
- 初回完了時にインセンティブ（200pt）が付与される。
- 完了状態は `is_profile_completed` フラグで管理される。
