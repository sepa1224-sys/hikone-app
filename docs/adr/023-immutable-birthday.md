# ADR-023: 生年月日のImmutable化 (Immutable Birthday)

## ステータス
承認済み

## 背景
誕生日ボーナスの導入に伴い、生年月日を頻繁に変更してボーナスを不正に複数回受け取るリスクが生じた。また、プラットフォームとしての信頼性を高めるため、年齢や属性データの正確性が重要となっている。

## 決定事項
ユーザーの生年月日（birthday）を「一度設定したら変更不可（Immutable）」なフィールドとして扱う。

### 具体的な実装
1. **Frontend**:
   - プロフィール編集画面において、既に生年月日が設定されている場合は入力フィールドを無効化（disabled）する。
   - 視覚的にロックされていることを示すアイコンやメッセージを表示する。

2. **Backend**:
   - `updateProfile` Server Action において、既存のプロフィールに `birthday` が設定されている場合、リクエストに含まれる `birthday` と照合する。
   - 値が異なる場合、更新処理を中断しエラーを返す。

## メリット
- 誕生日ボーナスの不正受給をシステム的に防止できる。
- ユーザー属性データ（年齢層など）の信頼性が向上する。

## デメリット
- 入力ミスをしたユーザーが自力で修正できなくなる（運営への問い合わせが必要）。
  - *対策*: 初回入力時に確認を促すUIが望ましいが、今回はMVPとしてロック機能のみを優先実装する。

## 関連資料
- `docs/specs/user_profile.md`
- `docs/specs/point_system.md`
